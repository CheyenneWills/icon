<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
    <TITLE>Release Notes for Version 9.4 of Icon</TITLE>
    <LINK REL="STYLESHEET" TYPE="text/css" HREF="istyle.css">
</HEAD>
<BODY>

<A HREF="http://www.cs.arizona.edu/icon/"> <IMG SRC="wwwcube.gif"
ALT="[Icon home]" WIDTH=128 HEIGHT=144 BORDER=0 ALIGN=RIGHT> </A>

<H1> Release Notes for Version 9.4 of Icon </H1>

<P> Gregg M. Townsend
<BR> <SMALL> Department of Computer Science </SMALL>
<BR> <SMALL> The University of Arizona </SMALL>

<P> <SMALL> www.cs.arizona.edu/icon/v940/relnotes.htm
<BR> Last updated May 1, 2001 </SMALL>
<!-- $Id$ -->


<H2> Introduction </H2>

<P> Version 9.4 of Icon is a modified and repackaged implementation 
based on version 9.3.2 of Icon. 
The changes make it easier to maintain, install, and use under Unix
while retaining potential portability to other systems.
Most significant are changes to path searching, described below,
and the inclusion of the Icon program library as a standard part
of all Unix source and binary distributions.

<P> The Icon language is unchanged, and this 9.4 Unix implementation
remains compatible at the source level with Icon 9.3 for Windows.


<H2> Recent feature additions </H2>

New features added since the publication of the Icon books
are described below.

<H3> Reading foreign text files </H3> 
<SMALL> (new with Version 9.3.1 of Icon) </SMALL>

<P> The function <CODE>read()</CODE> recognizes
three kinds of line terminators when reading a file
opened in translated mode:
Windows (CR+LF), Macintosh (CR), or Unix (LF).
Consequently, text files created on one platform can be
read by an Icon program running on a different platform. 

<H3> Reading directory contents </H3>
<SMALL> (new with Version 9.3.2 of Icon) </SMALL>

<P> The files in a directory can be listed by opening the directory as a file.
Subsequent reads return the names of the files contained in the directory.
The names are returned in no particular order, and for Unix, the directories 
<CODE>"."</CODE> and <CODE>".."</CODE> are included.

<H3> Path searching </H3>
<SMALL> (new with Version 9.4 of Icon) </SMALL>

<P> Under Unix, colons (<CODE>:</CODE>) may now separate directories in the
<CODE>LPATH</CODE> and <CODE>IPATH</CODE> environment variables.
The Icon translator and linker search these paths when looking for
<CODE>$include</CODE> and <CODE>link</CODE> files respectively.

<P> The Icon program library is now searched automatically, but
<CODE>LPATH</CODE> and <CODE>IPATH</CODE> can still be set to control
the search order.
For version 9.4, the effective path is:
<OL>
	<LI> the current directory
	<LI> directories named by the environment variable
	<LI> the Icon library directory
</OL>

<P> Other changes affect the configuration of Icon at installation time
and the way executable Icon programs locate the interpreter.
These changes, which are transparent to most users, are discussed
in more detail on the <A HREF="files.htm">File Organization</A> page.


<H2> Other Icon Changes </H2>

<P> Several areas of the Icon implementation have been cleaned up,
in particular the run-time initialization code,
and some obsolete configurations have been removed.

<P> With one clearly marked exception, programs in the standard
test suite now generate reproducible output.

<P> The following bug-fixes have been applied:
<UL>
<LI> Don't lose sign bit when converting real to large integer.
<LI> Don't crash on duplicate close(f).
<LI> Consistently give runerr for coordinate value too large for X.
<LI> Give runerr instead segfault for window attribute over 127 chars long.
<LI> Exit instead of looping on segfault during traceback of segfault.
<LI> Work around gcc 2.96 file inclusion bug.
</UL>


<H2> Library Changes </H2>


<P> The program library has been incorporated into the main Icon source tree
and is routinely built along with icont and iconx.  Tests for most of the
core library functions and loadable C functions have been incorporated the
standard test suite, and some additional consistency tests were developed.

<P> Numerous changes were made throughout the library to fix linking problems,
to fix typos and formatting, and to support building via Makefiles.

<P> Some files that were miscategorized as graphics or non-graphics have been
moved.  Duplicate files in the cfuncs and packs/loadfunc directories have
been eliminated.  Some other obsolete files were also removed.

<P> Other significant changes were:

<PRE>
procs/datetime		fixed dayoweek() to get all twelve months right
procs/factors		fixed divisors() to consistently return all factors
			fixed genfactors() for some failing cases
			added some minor optimizations
procs/io		modified to allow ":" as a path separator under Unix
procs/lists		fixed fatal bugs in lminlen() and lmaxlen()
procs/numbers		fixed decimal() for values where remainder repeats
procs/pqueue		added new priority queue procedures
procs/rational		added real2rat(v, p)	#: convert real to rational
procs/records		added fieldnum(R, s)	#: return index of field R.s

gprocs/drawlab		modified to let the caller control the window size

progs/htprep		modified to improve quoting
progs/ipatch		modified to understand v9.4 headers as well as v9.3
progs/unclog		added: program to reformat CVS logs

gprogs/breakout		added: a new breakout game
gprogs/dlgvu		modified to allow interruption while drawing labels
gprogs/gallery		modified to recognize some nonstandard JPEG files
gpacks/tiger		modified to allow interruption of drawing
gpacks/xtiles		fixed the usage message

packs/loadfunc/cspace	increased the default window size
</PRE>


<H2> Other Documentation </H2>

<P> See the <A HREF=docguide.htm>documentation guide</A>
for an overview of the available Icon documentation.

<P> For installation instructions, see
<A HREF=install.htm>Installing Binaries</A> or
<A HREF=build.htm>Building from Source</A> as appropriate.

<P> <HR>

</BODY>
</HTML>
